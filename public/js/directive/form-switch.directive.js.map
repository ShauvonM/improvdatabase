{"version":3,"sources":["../../app/src/directive/form-switch.directive.ts"],"names":[],"mappings":"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","file":"form-switch.directive.js","sourcesContent":["import {\r\n    Directive,\r\n    ElementRef,\r\n    OnInit,\r\n    Input,\r\n    Output,\r\n    EventEmitter,\r\n    Renderer2,\r\n    OnChanges,\r\n    SimpleChanges\r\n} from '@angular/core';\r\nimport { NgModel } from '@angular/forms';\r\n\r\n@Directive({\r\n    selector: '[formSwitch]',\r\n    providers: [NgModel],\r\n    host: {\r\n        '(ngModelChange)': 'onModelChange($event)'\r\n    }\r\n})\r\nexport class FormSwitchDirective implements OnInit, OnChanges {\r\n\r\n    inputElement: HTMLInputElement;\r\n\r\n    wrapper: HTMLSpanElement;\r\n    control: HTMLSpanElement;\r\n    partial: HTMLElement;\r\n\r\n    @Input('partial') partialActive: boolean;\r\n\r\n    // private _on: boolean;\r\n\r\n    constructor(\r\n        el: ElementRef,\r\n        private renderer: Renderer2,\r\n        private model: NgModel\r\n        ) {\r\n        this.inputElement = el.nativeElement;\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        let classes = this.inputElement.className;\r\n\r\n        this.inputElement.setAttribute('type', 'checkbox');\r\n\r\n        this.wrapper = document.createElement('span');\r\n        this.wrapper.className = classes + ' form-switch';\r\n\r\n        if (this.inputElement.name) {\r\n            this.wrapper.className += ' form-switch-' + this.inputElement.name;\r\n        }\r\n\r\n        this.inputElement.parentElement.insertBefore(this.wrapper, this.inputElement);\r\n        this.wrapper.appendChild(this.inputElement);\r\n\r\n        this.control = document.createElement('i');\r\n        this.control.className = 'control';\r\n        this.wrapper.appendChild(this.control);\r\n\r\n        let clickHandler;\r\n        if (this.wrapper.parentElement.tagName.toLowerCase() == 'label') {\r\n            clickHandler = this.wrapper.parentElement;\r\n        } else {\r\n            clickHandler = this.wrapper;\r\n        }\r\n\r\n        this.renderer.listen(clickHandler, 'click', e => this.click(e));\r\n\r\n        setTimeout(() => {\r\n            if (this.model.model) {\r\n                this.wrapper.classList.add('on');\r\n            }\r\n        }, 50);\r\n    }\r\n\r\n    ngOnChanges(changes: any): void {\r\n        if (changes.partialActive && changes.partialActive.currentValue) {\r\n            this.partial = document.createElement('i');\r\n            this.partial.className = 'fa fa-asterisk';\r\n            this.control.appendChild(this.partial);\r\n        } else if (changes.partialActive && this.partial) {\r\n            this.partial.remove();\r\n            this.partial = null;\r\n        }\r\n    }\r\n\r\n    onModelChange(model: boolean): void {\r\n        if (model) {\r\n            this.wrapper.classList.add('on');\r\n        } else {\r\n            this.wrapper.classList.remove('on');\r\n        }\r\n    }\r\n\r\n    check(): void {\r\n        setTimeout(() => {\r\n            this.onModelChange(this.model.model);\r\n        });\r\n    }\r\n\r\n    click(event: MouseEvent): void {        \r\n        this.inputElement.checked = !this.model.model;\r\n        this.inputElement.dispatchEvent(new Event('change'));\r\n\r\n        event.preventDefault();\r\n    }\r\n    \r\n}"]}