{"version":3,"sources":["../../app/src/app/component/team-create.component.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,sCAAkD;AAClD,0CAAyC;AAEzC,+DAA2D;AAC3D,yDAAuD;AACvD,wDAAsD;AACtD,2DAAyD;AAGzD,yCAAwC;AAOxC;IAWI,6BACW,IAAkB,EACjB,MAAc,EACd,QAAoB,EACpB,WAAwB,EACxB,WAAwB;QAJzB,SAAI,GAAJ,IAAI,CAAc;QACjB,WAAM,GAAN,MAAM,CAAQ;QACd,aAAQ,GAAR,QAAQ,CAAY;QACpB,gBAAW,GAAX,WAAW,CAAa;QACxB,gBAAW,GAAX,WAAW,CAAa;QAXpC,cAAS,GAAY,IAAI,CAAC;QAE1B,cAAS,GAAY,KAAK,CAAC;QAY3B,WAAM,GAAW,EAChB,CAAA;IAHG,CAAC;IAKL,sCAAQ,GAAR;QAEI,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;IAEnC,CAAC;IAED,wCAAU,GAAV;QAAA,iBAyBC;QAxBG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QAEtB,IAAI,IAAI,GAAG,IAAI,WAAI,EAAE,CAAC;QACtB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC1B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YACpC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC;QAChC,CAAC;QAED,mGAAmG;QAEnG,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC;aAC5B,IAAI,CAAC,UAAA,IAAI;YACN,KAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;YACpC,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QACpD,CAAC,CAAC;aACD,KAAK,CAAC,UAAA,CAAC;YACJ,IAAI,IAAI,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;YACpB,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,MAAM,CAAC,CAAC,CAAC;gBAC1B,KAAI,CAAC,SAAS,GAAG,8DAA8D,CAAC;YACpF,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,KAAI,CAAC,SAAS,GAAG,sCAAsC,CAAC;YAC5D,CAAC;YACD,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QAC3B,CAAC,CAAC,CAAA;IACV,CAAC;IArDQ,mBAAmB;QAL/B,gBAAS,CAAC;YACP,QAAQ,EAAE,MAAM,CAAC,EAAE;YACnB,QAAQ,EAAE,aAAa;YACvB,WAAW,EAAE,wCAAwC;SACxD,CAAC;yCAamB,4BAAY;YACT,eAAM;YACJ,wBAAU;YACP,0BAAW;YACX,0BAAW;OAhB3B,mBAAmB,CAuD/B;IAAD,0BAAC;CAvDD,AAuDC,IAAA;AAvDY,kDAAmB","file":"team-create.component.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nimport {AppComponent} from '../../component/app.component';\r\nimport { AppService } from '../../service/app.service';\r\nimport { TeamService } from '../service/team.service';\r\nimport { UserService } from '../../service/user.service';\r\n\r\nimport { Tool } from '../view/toolbar.view';\r\nimport { Team } from '../../model/team';\r\n\r\n@Component({\r\n    moduleId: module.id,\r\n    selector: \"team-create\",\r\n    templateUrl: \"../template/team-create.component.html\"\r\n})\r\nexport class TeamCreateComponent implements OnInit {\r\n\r\n    teamName: string;\r\n    teamEmail: string;\r\n\r\n    userEmail: boolean = true;\r\n\r\n    isPosting: boolean = false;\r\n\r\n    nameError: string;\r\n\r\n    constructor(\r\n        public _app: AppComponent,\r\n        private router: Router,\r\n        private _service: AppService,\r\n        private teamService: TeamService,\r\n        private userService: UserService\r\n    ) { }\r\n\r\n    _tools: Tool[] = [\r\n    ]\r\n\r\n    ngOnInit(): void {\r\n\r\n        this._app.showBackground(true);\r\n\r\n    }\r\n\r\n    createTeam(): void {\r\n        this.isPosting = true;\r\n\r\n        let team = new Team();\r\n        team.name = this.teamName;\r\n        if (!this.userEmail && this.teamEmail) {\r\n            team.email = this.teamEmail;\r\n        }\r\n\r\n        // TODO: a toggle to set whether the team has its own email address, or just use the current users?\r\n\r\n        this.teamService.createTeam(team)\r\n            .then(team => {\r\n                this.userService.addAdminTeam(team);\r\n                this.router.navigate(['app', 'team', team._id]);\r\n            })\r\n            .catch(e => {\r\n                let data = e.json();\r\n                if (data.conflict == 'name') {\r\n                    this.nameError = 'A team with that name is already registered on the database.';\r\n                } else {\r\n                    this.nameError = 'An error occurred. Please try again.';\r\n                }\r\n                this.isPosting = false;\r\n            })\r\n    }\r\n\r\n}\r\n"]}