{"version":3,"sources":["../../app/src/app/component/glossary.component.ts"],"names":[],"mappings":"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","file":"glossary.component.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nimport {AppComponent    } from '../../component/app.component';\r\nimport { Tool } from '../view/toolbar.view';\r\n\r\nimport { Tag } from '../../model/tag';\r\n\r\nimport { GameDatabaseService } from '../service/game-database.service';\r\nimport { UserService } from '../../service/user.service';\r\n\r\n@Component({\r\n    moduleId: module.id,\r\n    selector: \"glossary\",\r\n    templateUrl: \"../template/glossary.component.html\"\r\n})\r\nexport class GlossaryComponent implements OnInit {\r\n\r\n    title: string = '<span class=\"light\">glossary</span>';\r\n\r\n    tags: Tag[];\r\n\r\n    toggleAllTags: boolean = false;\r\n\r\n    private _tagDisplayCount: number = 0;\r\n    allTagsAreDisplayed: boolean;\r\n\r\n    isLoadingTags: boolean;\r\n\r\n    selectedTag: Tag;\r\n    tagDescription: string;\r\n\r\n    superAdmin: boolean;\r\n\r\n    constructor(\r\n        public _app: AppComponent,\r\n        private router: Router,\r\n        private gameService: GameDatabaseService,\r\n        private userService: UserService\r\n    ) { }\r\n\r\n    _tools: Tool[] = [\r\n    ]\r\n\r\n    ngOnInit(): void {\r\n        this.superAdmin = this.userService.isSuperAdmin();\r\n    }\r\n\r\n    allTagsToggle(): void {\r\n        setTimeout(() => {\r\n            this.getTags();\r\n        }, 100);\r\n    }\r\n\r\n    getTags(): void {\r\n        this.isLoadingTags = true;\r\n\r\n        this.gameService.getTags().then(tags => {\r\n            let filteredtags = tags.filter(tag => {\r\n                    return this.toggleAllTags || !!tag.description;\r\n                }).sort((a, b) => {\r\n                    return a.name.localeCompare(b.name);\r\n                });\r\n            if (filteredtags.length > this._tagDisplayCount) {\r\n                this.tags = filteredtags.slice(0, this._tagDisplayCount);\r\n                this.allTagsAreDisplayed = false;\r\n            } else {\r\n                this.tags = filteredtags;\r\n                this.allTagsAreDisplayed = true;\r\n            }\r\n            this.isLoadingTags = false;\r\n        });\r\n    }\r\n\r\n    loadMoreTags(page: number): void {\r\n        if (!this.allTagsAreDisplayed) {\r\n            this._tagDisplayCount = 30 * page;\r\n            this.getTags();\r\n        }\r\n    }\r\n\r\n    onSelect(tag: Tag): void {\r\n        if (this.selectedTag && this.selectedTag._id == tag._id) {\r\n            return;\r\n        }\r\n        this.selectedTag = tag;\r\n        this.tagDescription = tag.description;\r\n    }\r\n\r\n    saveTag(): void {\r\n        this.selectedTag.description = this.tagDescription;\r\n        this.gameService.saveTag(this.selectedTag).then(tag => {\r\n            this.selectedTag = null;\r\n        });\r\n    }\r\n\r\n}\r\n"]}