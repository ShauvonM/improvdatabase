{"version":3,"sources":["../src/ts/app/component/game-database.component.ts"],"names":[],"mappings":"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","file":"game-database.component.js","sourcesContent":["import {\r\n    Component,\r\n    OnInit,\r\n    OnDestroy,\r\n    trigger,\r\n    state,\r\n    style,\r\n    transition,\r\n    animate\r\n} from '@angular/core';\r\nimport { PathLocationStrategy } from '@angular/common';\r\n\r\nimport { Router } from '@angular/router';\r\nimport 'rxjs/Subscription';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\nimport {\r\n    AppComponent,\r\n    Tool,\r\n    ToolService } from './app.component';\r\nimport { GameDatabaseService } from '../service/game-database.service';\r\n\r\nimport { Game } from '../model/game';\r\nimport { Name } from '../model/name';\r\n\r\n@Component({\r\n    moduleId: module.id,\r\n    selector: \"game-database\",\r\n    templateUrl: '../template/game-database.component.html',\r\n    animations: [\r\n        trigger('flyInOut', [\r\n            state('in',   style({\r\n                opacity: 1\r\n            })),\r\n            transition('void => *', [\r\n                style({opacity: 0}),\r\n                animate(100)\r\n            ]),\r\n            transition('* => void', [\r\n                animate(100, style({opacity: 0}))\r\n            ])\r\n        ])\r\n    ]\r\n})\r\nexport class GameDatabaseComponent implements OnInit, OnDestroy {\r\n    games: Game[] = [];\r\n    names: Name[] = [];\r\n    selectedGame: Game;\r\n\r\n    private _titleBase: string = \"Games \";\r\n\r\n    constructor(\r\n        private _app: AppComponent,\r\n        private router: Router,\r\n        private toolService: ToolService,\r\n        private gameDatabaseService: GameDatabaseService,\r\n        private pathLocationStrategy: PathLocationStrategy\r\n    ) { }\r\n\r\n    private _tools: Tool[] = [\r\n        {\r\n            icon: \"fa-random\",\r\n            name: \"randomGame\",\r\n            text: \"Select Random Game\",\r\n            active: false\r\n        },\r\n        {\r\n            icon: \"fa-hashtag\",\r\n            name: \"showTags\",\r\n            text: \"Show Tags\",\r\n            active: false\r\n        },\r\n        {\r\n            icon: \"fa-filter\",\r\n            name: \"filter\",\r\n            text: \"Filter Games\",\r\n            active: false\r\n        },\r\n        {\r\n            icon: 'fa-sort-amount-asc',\r\n            name: 'sortGames',\r\n            text: 'Sort Games',\r\n            active: false\r\n        }\r\n    ]\r\n    toolSubscription: Subscription;\r\n\r\n    ngOnInit(): void {\r\n        this._app.setTitle(this._titleBase);\r\n        this._app.setTools(this._tools);\r\n\r\n        this.toolSubscription = this.toolService.tool$.subscribe(this.onToolClicked);\r\n\r\n        this._app.showLoader();\r\n        this.getGames();\r\n\r\n        this.pathLocationStrategy.onPopState(() => {\r\n            this.selectedGame = null;\r\n        });\r\n\r\n        // TODO: make the toolbar elevate as the user scrolls\r\n    }\r\n\r\n    getGames(): void {\r\n        this.gameDatabaseService.getGames('name').then(games => {\r\n            setTimeout(() => {\r\n                this._app.hideLoader();\r\n                this.games = games\r\n            }, 1);\r\n        });\r\n    }\r\n\r\n    trackByGames(index: number, game: Game) {\r\n        return game.GameID;\r\n    }\r\n\r\n    onSelect(game: Game): void {\r\n        if (!game || this.selectedGame == game) {\r\n            this.selectedGame = null;\r\n        } else {\r\n            this.selectedGame = game;\r\n        }\r\n    \r\n        this.pathLocationStrategy.pushState({}, \"\", \"/game/\" + this.selectedGame.GameID, \"\");\r\n    }\r\n\r\n    closeDetails(): void {\r\n        this.selectedGame = null;\r\n        this.pathLocationStrategy.back();\r\n    }\r\n\r\n    onToolClicked(tool: Tool): void {\r\n        switch (tool.name) {\r\n            case \"showTags\":\r\n                tool.active = !tool.active;\r\n                break;\r\n            case \"filter\":\r\n                console.log('FILTER');\r\n                break;\r\n            case \"randomGame\":\r\n                console.log('random game');\r\n                break;\r\n            case \"searchGames\":\r\n                console.log('search game');\r\n                break;\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.toolSubscription.unsubscribe();\r\n    }\r\n}\r\n"]}