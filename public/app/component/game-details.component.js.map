{"version":3,"sources":["../src/ts/app/component/game-details.component.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAYO,eAAe,CAAC,CAAA;AACvB,uBAAiD,iBAAiB,CAAC,CAAA;AACnE,uBAA2B,iBAAiB,CAAC,CAAA;AAE7C,sCAAoC,kCAAkC,CAAC,CAAA;AAEvE,qBAAqB,eAAe,CAAC,CAAA;AAwBrC;IAiBI,8BACY,mBAAwC,EACxC,MAAc,EACd,KAAqB,EACrB,QAAkB;QAHlB,wBAAmB,GAAnB,mBAAmB,CAAqB;QACxC,WAAM,GAAN,MAAM,CAAQ;QACd,UAAK,GAAL,KAAK,CAAgB;QACrB,aAAQ,GAAR,QAAQ,CAAU;QAlBpB,YAAO,GAAG,IAAI,mBAAY,EAAE,CAAC;QAEvC,WAAM,GAAY,KAAK,CAAC;QAIxB,SAAI,GAAU,EAAE,CAAC;QAEjB,cAAS,GAAW,CAAC,CAAC;QAEtB,cAAS,GAAY,KAAK,CAAC;QAE3B,8BAAyB,GAAW,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC;IAS9D,CAAC;IAED,uCAAQ,GAAR;QAAA,iBAWC;QAVG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACb,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,MAAc;gBACrC,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBACvB,KAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,EAAE,CAAC;qBAC/B,IAAI,CAAC,UAAA,IAAI,IAAI,OAAA,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAlB,CAAkB,CAAC,CAAC;YAC1C,CAAC,CAAC,CAAC;QACP,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC;IACL,CAAC;IAED,0CAAW,GAAX;IAEA,CAAC;IAED,sCAAO,GAAP,UAAQ,IAAU;QAAlB,iBAaC;QAZG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QAEjB,IAAI,CAAC,mBAAmB,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC;aAC/D,IAAI,CAAC,UAAC,WAAW,IAAK,OAAA,KAAI,CAAC,WAAW,GAAG,WAAW,EAA9B,CAA8B,CAAC,CAAC;QAE3D,IAAI,CAAC,mBAAmB,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;aACzD,IAAI,CAAC,UAAC,QAAQ,IAAK,OAAA,KAAI,CAAC,QAAQ,GAAG,QAAQ,EAAxB,CAAwB,CAAC,CAAC;QAElD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAC,OAAO;YAC/B,KAAI,CAAC,mBAAmB,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC;iBAC7C,IAAI,CAAC,UAAC,GAAG,IAAK,OAAA,KAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAnB,CAAmB,CAAC,CAAC;QAC5C,CAAC,CAAC,CAAC;IACP,CAAC;IAED,wCAAS,GAAT;QACI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YACf,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;QACrC,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC;IACL,CAAC;IAED,uCAAQ,GAAR,UAAS,MAAM;QACX,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC;IAC7C,CAAC;IAED,0CAAW,GAAX;QACI,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC;IACrC,CAAC;IAtED;QAAC,YAAK,EAAE;;sDAAA;IACR;QAAC,aAAM,EAAE;;yDAAA;IArBb;QAAC,gBAAS,CAAC;YACP,QAAQ,EAAE,MAAM,CAAC,EAAE;YACnB,QAAQ,EAAE,uBAAuB;YACjC,WAAW,EAAE,yCAAyC;YACtD,UAAU,EAAE;gBACR,cAAO,CAAC,QAAQ,EAAE;oBACd,YAAK,CAAC,IAAI,EAAE,YAAK,CAAC,EAAC,MAAM,EAAE,GAAG,EAAC,CAAC,CAAC;oBACjC,iBAAU,CAAC,WAAW,EAAE;wBACpB,YAAK,CAAC,EAAC,MAAM,EAAE,CAAC,EAAC,CAAC;wBAClB,cAAO,CAAC,GAAG,CAAC;qBACf,CAAC;oBACF,iBAAU,CAAC,WAAW,EAAE;wBACpB,YAAK,CAAC,EAAC,MAAM,EAAE,GAAG,EAAC,CAAC;wBACpB,cAAO,CAAC,GAAG,EAAE,YAAK,CAAC,EAAC,MAAM,EAAE,CAAC,EAAC,CAAC,CAAC;qBACnC,CAAC;iBACL,CAAC;aACL;SACJ,CAAC;;4BAAA;IA2EF,2BAAC;AAAD,CA1EA,AA0EC,IAAA;AA1EY,4BAAoB,uBA0EhC,CAAA","file":"game-details.component.js","sourcesContent":["import { \r\n    Component,\r\n    OnInit,\r\n    OnDestroy,\r\n    Input,\r\n    Output,\r\n    EventEmitter,\r\n    trigger,\r\n    state,\r\n    style,\r\n    transition,\r\n    animate\r\n} from '@angular/core';\r\nimport { Router, ActivatedRoute, Params }   from '@angular/router';\r\nimport { Location }   from '@angular/common';\r\n\r\nimport { GameDatabaseService } from '../service/game-database.service';\r\n\r\nimport { Game } from '../model/game';\r\nimport { Name } from '../model/name';\r\nimport { PlayerCount } from '../model/player-count';\r\nimport { Duration } from '../model/duration';\r\nimport { Tag } from '../model/tag';\r\n\r\n@Component({\r\n    moduleId: module.id,\r\n    selector: '.page.ng-game-details',\r\n    templateUrl: '../template/game-details.component.html',\r\n    animations: [\r\n        trigger('expand', [\r\n            state('in', style({height: '*'})),\r\n            transition('void => *', [\r\n                style({height: 0}),\r\n                animate(100)\r\n            ]),\r\n            transition('* => void', [\r\n                style({height: '*'}),\r\n                animate(100, style({height: 0}))\r\n            ])\r\n        ])\r\n    ]\r\n})\r\nexport class GameDetailsComponent implements OnInit, OnDestroy {\r\n\r\n    @Input() game: Game;\r\n    @Output() onClose = new EventEmitter();\r\n\r\n    dialog: boolean = false;\r\n\r\n    playerCount: PlayerCount;\r\n    duration: Duration;\r\n    tags: Tag[] = [];\r\n\r\n    scrollpos: number = 0;\r\n\r\n    namesOpen: boolean = false;\r\n\r\n    showToolbarScrollPosition: number = window.innerHeight * 0.15;\r\n\r\n    constructor(\r\n        private gameDatabaseService: GameDatabaseService,\r\n        private router: Router,\r\n        private route: ActivatedRoute,\r\n        private location: Location\r\n    ) {\r\n\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (!this.game) {\r\n            this.route.params.forEach((params: Params) => {\r\n                let id = +params['id'];\r\n                this.gameDatabaseService.getGame(id)\r\n                    .then(game => this.setGame(game));\r\n            });\r\n        } else {\r\n            this.dialog = true;\r\n            this.setGame(this.game);\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n\r\n    }\r\n\r\n    setGame(game: Game): void {\r\n        this.game = game;\r\n\r\n        this.gameDatabaseService.getPlayerCountById(this.game.PlayerCountID)\r\n            .then((playercount) => this.playerCount = playercount);\r\n\r\n        this.gameDatabaseService.getDurationById(this.game.DurationID)\r\n            .then((duration) => this.duration = duration);\r\n\r\n        this.game.TagGames.forEach((tagGame) => {\r\n            this.gameDatabaseService.getTagById(tagGame.TagID)\r\n                .then((tag) => this.tags.push(tag));\r\n        });\r\n    }\r\n\r\n    closePage(): void {\r\n        if (!this.dialog) {\r\n            this.router.navigate(['/games']);\r\n        } else {\r\n            this.onClose.emit(true);\r\n        }\r\n    }\r\n\r\n    onScroll($event): void {\r\n        this.scrollpos = $event.target.scrollTop;\r\n    }\r\n\r\n    toggleNames(): void {\r\n        this.namesOpen = !this.namesOpen;\r\n    }\r\n\r\n}"]}