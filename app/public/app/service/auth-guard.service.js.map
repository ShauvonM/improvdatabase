{"version":3,"sources":["../src/ts/app/service/auth-guard.service.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,sCAA2C;AAC3C,0CAAwG;AAGxG,wDAAsD;AAGtD,IAAa,SAAS;IAClB,mBACY,MAAc,EACd,WAAwB;QADxB,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAa;IACjC,CAAC;IAEJ,oCAAgB,GAAhB,UAAkB,KAA6B,EAAE,KAA0B;QACvE,kDAAkD;QAElD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;YACrC,IAAI,IAAI,GAAO,KAAK,CAAC,IAAI,CAAC;YAC1B,uDAAuD;YACvD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBACpD,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;YAAC,IAAI,CAAC,CAAC;YAGR,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;QACrC,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IACL,gBAAC;AAAD,CAvBA,AAuBC,IAAA;AAvBY,SAAS;IADrB,iBAAU,EAAE;qCAGW,eAAM;QACD,0BAAW;GAH3B,SAAS,CAuBrB;AAvBY,8BAAS","file":"auth-guard.service.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { CanActivateChild, Router, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\n\r\nimport { User } from \"../model/user\";\r\nimport { UserService } from '../service/user.service';\r\n\r\n@Injectable() \r\nexport class AuthGuard implements CanActivateChild {\r\n    constructor(\r\n        private router: Router,\r\n        private userService: UserService\r\n    ) {}\r\n\r\n    canActivateChild (route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\r\n        //console.log(this.userService.getLoggedInUser());\r\n\r\n        if (this.userService.getLoggedInUser()) {\r\n            let data:any = route.data;\r\n            //console.log(data, this.userService.can(data.action));\r\n            if (!data.action || this.userService.can(data.action)) {\r\n                return true;\r\n            } else {\r\n                //this.router.navigate(['/unauthorized']);\r\n                // TODO: show dialog\r\n            }\r\n        } else {\r\n            this.router.navigate(['/login']);\r\n        }\r\n        return false;\r\n    }\r\n}"]}