{"version":3,"sources":["../../src/ts/app/view/create-metadata.view.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,sCAMuB;AAGvB,6EAA0E;AAC1E,2DAAyD;AAIzD,kDAA4D;AAE5D,IAAM,YAAY,GAAG,CAAC,CAAC;AAWvB,IAAa,kBAAkB;IAa3B,4BACY,WAAwB,EACxB,mBAAwC;QADxC,gBAAW,GAAX,WAAW,CAAa;QACxB,wBAAmB,GAAnB,mBAAmB,CAAqB;QAb1C,SAAI,GAAsB,IAAI,mBAAY,EAAE,CAAC;IAcnD,CAAC;IAEL,qCAAQ,GAAR;IAEA,CAAC;IAED,2CAAc,GAAd;QAAA,iBAmBC;QAlBG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;YACtC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,cAAc,CAAC,CAAC,CAAC;gBAC9B,4BAA4B;gBAC5B,IAAI,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,WAAW,CAAC;qBACtF,IAAI,CAAC,UAAA,WAAW;oBACb,KAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;gBAChC,CAAC,CAAC,CAAC;YACX,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,wBAAwB;gBACxB,IAAI,CAAC,mBAAmB,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,WAAW,CAAC;qBACnF,IAAI,CAAC,UAAA,QAAQ;oBACV,KAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC7B,CAAC,CAAC,CAAC;YACX,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,MAAM,EAAE,CAAC;QAClB,CAAC;IACL,CAAC;IAED,mCAAM,GAAN;QACI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrB,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAEL,yBAAC;AAAD,CAhDA,AAgDC,IAAA;AA9Ca;IAAT,aAAM,EAAE;8BAAO,mBAAY;gDAA2B;AAI9C;IAAR,YAAK,EAAE;;gDAAc;AANb,kBAAkB;IAT9B,gBAAS,CAAC;QACP,QAAQ,EAAE,MAAM,CAAC,EAAE;QACnB,QAAQ,EAAE,iBAAiB;QAC3B,WAAW,EAAE,4CAA4C;QACzD,UAAU,EAAE;YACR,sBAAU,CAAC,MAAM;YACjB,oBAAQ,CAAC,IAAI;SAChB;KACJ,CAAC;qCAe2B,0BAAW;QACH,2CAAmB;GAf3C,kBAAkB,CAgD9B;AAhDY,gDAAkB","file":"create-metadata.view.js","sourcesContent":["import { \r\n    Component,\r\n    OnInit,\r\n    Input,\r\n    Output,\r\n    EventEmitter\r\n} from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { GameDatabaseService } from \"../../service/game-database.service\";\r\nimport { UserService } from \"../../service/user.service\";\r\n\r\nimport { User } from \"../../model/user\";\r\n\r\nimport { DialogAnim, FadeAnim } from '../../util/anim.util';\r\n\r\nconst MAX_ATTEMPTS = 5;\r\n\r\n@Component({\r\n    moduleId: module.id,\r\n    selector: \"create-metadata\",\r\n    templateUrl: \"../template/view/create-metadata.view.html\",\r\n    animations: [\r\n        DialogAnim.dialog,\r\n        FadeAnim.fade\r\n    ]\r\n})\r\nexport class CreateMetadataView implements OnInit {\r\n\r\n    @Output() done: EventEmitter<any> = new EventEmitter();\r\n\r\n    isPosting: boolean;\r\n\r\n    @Input() type: string;\r\n\r\n    name: string;\r\n    min: number;\r\n    max: number;\r\n    description: string;\r\n\r\n    constructor(\r\n        private userService: UserService,\r\n        private gameDatabaseService: GameDatabaseService\r\n    ) { }\r\n\r\n    ngOnInit(): void {\r\n        \r\n    }\r\n\r\n    createMetadata(): void {\r\n        this.isPosting = true;\r\n        if (this.userService.can('meta_create')) {\r\n            if (this.type == \"Player Count\") {\r\n                // create a new player count\r\n                this.gameDatabaseService.createPlayerCount(this.name, this.min, this.max, this.description)\r\n                    .then(playercount => {\r\n                        this.done.emit(playercount);\r\n                    });\r\n            } else {\r\n                // create a new Duration\r\n                this.gameDatabaseService.createDuration(this.name, this.min, this.max, this.description)\r\n                    .then(duration => {\r\n                        this.done.emit(duration);\r\n                    });\r\n            }\r\n        } else {\r\n            this.cancel();\r\n        }\r\n    }\r\n\r\n    cancel(): boolean {\r\n        this.done.emit(null);\r\n        return false;\r\n    }\r\n\r\n}\r\n"]}